{"ast":null,"code":"var _jsxFileName = \"C:\\\\water\\\\chemical-dispersion-app\\\\frontend\\\\src\\\\components\\\\Map\\\\DispersionMap.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { useState, useEffect, useRef, useCallback } from 'react';\nimport { MapContainer, TileLayer, Marker, Popup, Circle, useMap } from 'react-leaflet';\nimport { apiService } from '../../services/api';\nimport 'leaflet/dist/leaflet.css';\nimport L from 'leaflet';\nimport './DispersionMap.css';\n\n// Fix for default markers in react-leaflet\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\ndelete L.Icon.Default.prototype._getIconUrl;\nL.Icon.Default.mergeOptions({\n  iconRetinaUrl: require('leaflet/dist/images/marker-icon-2x.png'),\n  iconUrl: require('leaflet/dist/images/marker-icon.png'),\n  shadowUrl: require('leaflet/dist/images/marker-shadow.png')\n});\n\n// Fullscreen control component\nfunction FullscreenControl({\n  onToggle\n}) {\n  _s();\n  const map = useMap();\n  useEffect(() => {\n    const control = L.control({\n      position: 'topright'\n    });\n    control.onAdd = () => {\n      const button = L.DomUtil.create('button', 'leaflet-bar leaflet-control fullscreen-btn');\n      button.innerHTML = '⛶';\n      button.title = 'Toggle Fullscreen';\n      button.onclick = onToggle;\n      return button;\n    };\n    control.addTo(map);\n    return () => control.remove();\n  }, [map, onToggle]);\n  return null;\n}\n_s(FullscreenControl, \"IoceErwr5KVGS9kN4RQ1bOkYMAg=\", false, function () {\n  return [useMap];\n});\n_c = FullscreenControl;\nfunction DispersionMap({\n  spills = [],\n  selectedSpill,\n  onSpillSelect,\n  onSpillUpdate,\n  onStatusUpdate,\n  calculateDispersion\n}) {\n  _s2();\n  const [dispersionData, setDispersionData] = useState(null);\n  const [isCalculating, setIsCalculating] = useState(false);\n  const [error, setError] = useState(null);\n  const [mapCenter] = useState([29.7604, -95.3698]); // Houston, TX\n  const [isFullscreen, setIsFullscreen] = useState(false);\n  const [weatherData, setWeatherData] = useState(null);\n  const [tidalData, setTidalData] = useState(null);\n  const [spillVisualizations, setSpillVisualizations] = useState({});\n  const calculationsInProgress = useRef(new Set());\n  const hasCalculatedRef = useRef(new Set());\n  const lastCalculationRef = useRef(null);\n  const mapRef = useRef(null);\n\n  // Load environmental data for selected spill\n  useEffect(() => {\n    if (selectedSpill !== null && selectedSpill !== void 0 && selectedSpill.latitude && selectedSpill !== null && selectedSpill !== void 0 && selectedSpill.longitude) {\n      loadEnvironmentalData(selectedSpill.latitude, selectedSpill.longitude);\n      if (!hasCalculatedRef.current.has(selectedSpill.id) && !isCalculating && lastCalculationRef.current !== selectedSpill.id) {\n        handleCalculateDispersion(selectedSpill.id);\n      }\n    }\n  }, [selectedSpill === null || selectedSpill === void 0 ? void 0 : selectedSpill.id]);\n\n  // Update spill visualizations when environmental data changes\n  useEffect(() => {\n    if (weatherData && tidalData && selectedSpill) {\n      updateSpillVisualization(selectedSpill);\n    }\n  }, [weatherData, tidalData, selectedSpill, dispersionData]);\n  const loadEnvironmentalData = async (lat, lng) => {\n    try {\n      const [weather, tides] = await Promise.all([apiService.getCurrentWeather(lat, lng).catch(err => {\n        console.warn('Weather data unavailable:', err);\n        return createMockWeather();\n      }), apiService.getTideForecast(lat, lng, 24).catch(err => {\n        console.warn('Tidal data unavailable:', err);\n        return [createMockTide()];\n      })]);\n      setWeatherData(weather);\n      setTidalData(Array.isArray(tides) ? tides[0] : tides);\n    } catch (error) {\n      console.error('Error loading environmental data:', error);\n      setWeatherData(createMockWeather());\n      setTidalData(createMockTide());\n    }\n  };\n  const createMockWeather = () => ({\n    temperature: 22.0,\n    windSpeed: 5.5,\n    windDirection: 180.0,\n    humidity: 65.0,\n    pressure: 1013.25,\n    visibility: 10.0,\n    weatherCondition: 'Partly Cloudy'\n  });\n  const createMockTide = () => ({\n    tideHeight: 1.2,\n    currentSpeed: 0.3,\n    currentDirection: 90,\n    time: new Date().toISOString()\n  });\n  const updateSpillVisualization = spill => {\n    if (!spill || !weatherData || !tidalData) return;\n\n    // Safely extract and validate numeric values\n    const volume = parseFloat(spill.volume) || 1000;\n    const windSpeed = parseFloat(weatherData.windSpeed) || 5;\n    const temperature = parseFloat(weatherData.temperature) || 20;\n    const currentSpeed = parseFloat(tidalData.currentSpeed) || 0.3;\n    const windDirection = parseFloat(weatherData.windDirection) || 0;\n    const currentDirection = parseFloat(tidalData.currentDirection) || 0;\n\n    // Calculate base radius from volume with safety checks\n    const baseRadius = Math.max(100, Math.sqrt(volume) * 2); // Minimum 100m radius\n\n    // Environmental factors with bounds checking\n    const windEffect = Math.min(Math.max(windSpeed / 10, 0.1), 2.0); // 0.1 to 2.0\n    const tideEffect = Math.min(Math.max(currentSpeed * 100, 0.1), 1.5); // 0.1 to 1.5\n    const tempEffect = Math.min(Math.max((temperature - 15) / 20, 0.5), 1.5); // 0.5 to 1.5\n\n    // Chemical properties effect (simplified)\n    const chemicalEffect = getChemicalSpreadFactor(spill.chemicalType);\n\n    // Calculate final radius with safety bounds\n    const calculatedRadius = baseRadius * (1 + windEffect + tideEffect + tempEffect) * chemicalEffect;\n    const finalRadius = Math.max(100, Math.min(calculatedRadius, 10000)); // Between 100m and 10km\n\n    // Calculate spread direction based on wind and current\n    const avgDirection = (windDirection + currentDirection) / 2;\n\n    // Ensure opacity is valid\n    const calculatedOpacity = Math.min(0.8, 0.3 + volume / 10000);\n    const finalOpacity = Math.max(0.1, Math.min(calculatedOpacity, 0.8));\n\n    // Validate all values before setting state\n    if (isFinite(finalRadius) && isFinite(avgDirection) && isFinite(finalOpacity)) {\n      setSpillVisualizations(prev => ({\n        ...prev,\n        [spill.id]: {\n          radius: finalRadius,\n          direction: avgDirection,\n          opacity: finalOpacity,\n          color: getSpillColor(spill.chemicalType, spill.priority)\n        }\n      }));\n    } else {\n      console.warn('Invalid visualization values calculated for spill:', spill.id);\n      // Set safe default values\n      setSpillVisualizations(prev => ({\n        ...prev,\n        [spill.id]: {\n          radius: 500,\n          // Default 500m radius\n          direction: 0,\n          opacity: 0.5,\n          color: getSpillColor(spill.chemicalType, spill.priority)\n        }\n      }));\n    }\n  };\n  const getChemicalSpreadFactor = chemicalType => {\n    if (!chemicalType) return 1.0;\n    const chemical = chemicalType.toLowerCase();\n    if (chemical.includes('oil') || chemical.includes('petroleum')) return 1.5;\n    if (chemical.includes('acid') || chemical.includes('toxic')) return 0.8;\n    if (chemical.includes('gas') || chemical.includes('volatile')) return 2.0;\n    return 1.0;\n  };\n  const getSpillColor = (chemicalType, priority) => {\n    if (priority === 'CRITICAL') return '#dc2626';\n    if (priority === 'HIGH') return '#ea580c';\n    if (!chemicalType) return '#3b82f6';\n    const chemical = chemicalType.toLowerCase();\n    if (chemical.includes('oil')) return '#92400e';\n    if (chemical.includes('toxic') || chemical.includes('acid')) return '#7c2d12';\n    if (chemical.includes('gas')) return '#4338ca';\n    return '#3b82f6';\n  };\n  const handleCalculateDispersion = async spillId => {\n    if (calculationsInProgress.current.has(spillId) || hasCalculatedRef.current.has(spillId) || lastCalculationRef.current === spillId) {\n      console.log(`[SKIP] Already calculating or calculated for spill ${spillId}`);\n      return;\n    }\n    setIsCalculating(true);\n    setError(null);\n    lastCalculationRef.current = spillId;\n    try {\n      console.log(`[CALCULATING] Starting dispersion for spill ${spillId}`);\n      const result = await calculateDispersion(spillId, 24);\n      setDispersionData(result);\n      hasCalculatedRef.current.add(spillId);\n      console.log(`[SUCCESS] Dispersion calculation completed for ${spillId}`);\n    } catch (error) {\n      console.error('Dispersion calculation failed:', error);\n      setError('Failed to calculate dispersion. Please try again.');\n      hasCalculatedRef.current.delete(spillId);\n    } finally {\n      setIsCalculating(false);\n    }\n  };\n  const handleEndIncident = async spillId => {\n    if (!spillId) return;\n    const confirmed = window.confirm('Are you sure you want to end this incident? This action cannot be undone.');\n    if (!confirmed) return;\n    try {\n      await onStatusUpdate(spillId, 'CLEANED_UP');\n      console.log(`Incident ${spillId} marked as cleaned up`);\n    } catch (error) {\n      console.error('Error ending incident:', error);\n      alert('Failed to end incident. Please try again.');\n    }\n  };\n  const toggleFullscreen = useCallback(() => {\n    setIsFullscreen(prev => !prev);\n  }, []);\n  const createCustomIcon = spill => {\n    const color = getSpillColor(spill.chemicalType, spill.priority);\n    return L.divIcon({\n      className: 'custom-spill-marker',\n      html: `<div style=\"\n                background-color: ${color}; \n                width: 24px; \n                height: 24px; \n                border-radius: 50%; \n                border: 3px solid white;\n                box-shadow: 0 2px 8px rgba(0,0,0,0.3);\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                color: white;\n                font-weight: bold;\n                font-size: 12px;\n            \">${spill.priority === 'CRITICAL' ? '!' : spill.priority === 'HIGH' ? '⚠' : '●'}</div>`,\n      iconSize: [24, 24],\n      iconAnchor: [12, 12]\n    });\n  };\n\n  // Safety function to validate circle props\n  const getCircleProps = (viz, spill) => {\n    const radius = parseFloat(viz.radius);\n    const opacity = parseFloat(viz.opacity);\n\n    // Ensure all values are valid numbers\n    if (!isFinite(radius) || radius <= 0) {\n      console.warn(`Invalid radius for spill ${spill.id}:`, radius);\n      return null; // Don't render invalid circles\n    }\n    if (!isFinite(opacity) || opacity < 0 || opacity > 1) {\n      console.warn(`Invalid opacity for spill ${spill.id}:`, opacity);\n      return null;\n    }\n    return {\n      radius: Math.max(100, Math.min(radius, 10000)),\n      // Constrain between 100m and 10km\n      pathOptions: {\n        color: viz.color || '#3b82f6',\n        fillColor: viz.color || '#3b82f6',\n        fillOpacity: Math.max(0.1, Math.min(opacity * 0.3, 0.3)),\n        weight: 2,\n        opacity: Math.max(0.1, Math.min(opacity, 0.8))\n      }\n    };\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `dispersion-map-container ${isFullscreen ? 'fullscreen' : ''}`,\n    children: [error && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"error-overlay\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"error-content\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"error-icon\",\n          children: \"\\u26A0\\uFE0F\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 294,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 295,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setError(null),\n          className: \"btn btn-sm btn-secondary\",\n          children: \"Dismiss\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 296,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 293,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 292,\n      columnNumber: 17\n    }, this), isCalculating && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"calculation-overlay\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"calculation-content\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"loading-spinner\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 307,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Calculating dispersion model for \", selectedSpill === null || selectedSpill === void 0 ? void 0 : selectedSpill.name, \"...\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 308,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 306,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 305,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"map-wrapper\",\n      children: /*#__PURE__*/_jsxDEV(MapContainer, {\n        ref: mapRef,\n        center: mapCenter,\n        zoom: 11,\n        style: {\n          height: '100%',\n          width: '100%'\n        },\n        zoomControl: !isFullscreen,\n        children: [/*#__PURE__*/_jsxDEV(TileLayer, {\n          url: \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\",\n          attribution: \"\\xA9 <a href=\\\"https://www.openstreetmap.org/copyright\\\">OpenStreetMap</a> contributors\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 322,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(FullscreenControl, {\n          onToggle: toggleFullscreen\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 327,\n          columnNumber: 21\n        }, this), spills.map(spill => {\n          const viz = spillVisualizations[spill.id];\n          const circleProps = viz ? getCircleProps(viz, spill) : null;\n          return /*#__PURE__*/_jsxDEV(React.Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(Marker, {\n              position: [spill.latitude, spill.longitude],\n              icon: createCustomIcon(spill),\n              eventHandlers: {\n                click: () => onSpillSelect(spill)\n              },\n              children: /*#__PURE__*/_jsxDEV(Popup, {\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"spill-popup\",\n                  children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                    children: spill.name\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 345,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                      children: \"Chemical:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 346,\n                      columnNumber: 48\n                    }, this), \" \", spill.chemicalType]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 346,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                      children: \"Volume:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 347,\n                      columnNumber: 48\n                    }, this), \" \", (spill.volume || 0).toLocaleString(), \"L\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 347,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                      children: \"Status:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 348,\n                      columnNumber: 48\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: `status ${spill.status.toLowerCase()}`,\n                      children: spill.status\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 349,\n                      columnNumber: 49\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 348,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                      children: \"Priority:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 353,\n                      columnNumber: 48\n                    }, this), \" \", spill.priority]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 353,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                      children: \"Time:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 354,\n                      columnNumber: 48\n                    }, this), \" \", new Date(spill.spillTime).toLocaleString()]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 354,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"popup-actions\",\n                    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                      onClick: () => handleCalculateDispersion(spill.id),\n                      disabled: isCalculating,\n                      className: \"btn btn-sm btn-primary\",\n                      children: \"Calculate Dispersion\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 357,\n                      columnNumber: 49\n                    }, this), spill.status !== 'CLEANED_UP' && /*#__PURE__*/_jsxDEV(\"button\", {\n                      onClick: () => handleEndIncident(spill.id),\n                      className: \"btn btn-sm btn-danger\",\n                      children: \"End Incident\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 365,\n                      columnNumber: 53\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 356,\n                    columnNumber: 45\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 344,\n                  columnNumber: 41\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 343,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 336,\n              columnNumber: 33\n            }, this), circleProps && spill.id === (selectedSpill === null || selectedSpill === void 0 ? void 0 : selectedSpill.id) && /*#__PURE__*/_jsxDEV(Circle, {\n              center: [spill.latitude, spill.longitude],\n              radius: circleProps.radius,\n              pathOptions: circleProps.pathOptions,\n              children: /*#__PURE__*/_jsxDEV(Popup, {\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"dispersion-popup\",\n                  children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                    children: \"Dispersion Zone\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 386,\n                    columnNumber: 49\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                      children: \"Affected Radius:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 387,\n                      columnNumber: 52\n                    }, this), \" \", Math.round(circleProps.radius), \"m\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 387,\n                    columnNumber: 49\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                      children: \"Calculation Time:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 388,\n                      columnNumber: 52\n                    }, this), \" \", dispersionData === null || dispersionData === void 0 ? void 0 : dispersionData.calculationTime]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 388,\n                    columnNumber: 49\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                      children: \"Environmental Factors:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 389,\n                      columnNumber: 52\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 389,\n                    columnNumber: 49\n                  }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"li\", {\n                      children: [\"Wind: \", weatherData === null || weatherData === void 0 ? void 0 : weatherData.windSpeed, \" @ \", weatherData === null || weatherData === void 0 ? void 0 : weatherData.windDirection, \"\\xB0\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 391,\n                      columnNumber: 53\n                    }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                      children: [\"Current: \", tidalData === null || tidalData === void 0 ? void 0 : tidalData.currentSpeed, \" m/s\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 392,\n                      columnNumber: 53\n                    }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                      children: [\"Temperature: \", weatherData === null || weatherData === void 0 ? void 0 : weatherData.temperature, \"\\xB0C\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 393,\n                      columnNumber: 53\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 390,\n                    columnNumber: 49\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 385,\n                  columnNumber: 45\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 384,\n                columnNumber: 41\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 379,\n              columnNumber: 37\n            }, this)]\n          }, spill.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 335,\n            columnNumber: 29\n          }, this);\n        })]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 315,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 314,\n      columnNumber: 13\n    }, this), selectedSpill && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"spill-details-sidebar\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"sidebar-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: selectedSpill.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 409,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-sm btn-secondary\",\n          onClick: () => onSpillSelect(null),\n          children: \"\\u2715\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 410,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 408,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"sidebar-content\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"detail-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            children: \"Incident Details\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 420,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"detail-grid\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"detail-item\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Chemical:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 423,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: selectedSpill.chemicalType\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 424,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 422,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"detail-item\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Volume:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 427,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: [(selectedSpill.volume || 0).toLocaleString(), \"L\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 428,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 426,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"detail-item\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Status:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 431,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: `status ${selectedSpill.status.toLowerCase()}`,\n                children: selectedSpill.status\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 432,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 430,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"detail-item\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Priority:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 437,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: `priority ${selectedSpill.priority.toLowerCase()}`,\n                children: selectedSpill.priority\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 438,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 436,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"detail-item\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Location:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 443,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: [selectedSpill.latitude.toFixed(4), \", \", selectedSpill.longitude.toFixed(4)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 444,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 442,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"detail-item\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Reported:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 447,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: new Date(selectedSpill.spillTime).toLocaleString()\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 448,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 446,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 421,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 419,\n          columnNumber: 25\n        }, this), dispersionData && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"detail-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            children: \"Dispersion Analysis\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 455,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"analysis-data\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Last Calculated:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 457,\n                columnNumber: 40\n              }, this), \" \", dispersionData.calculationTime]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 457,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Affected Area:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 458,\n                columnNumber: 40\n              }, this), \" \", dispersionData.affectedAreaKm2 || 0, \" km\\xB2\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 458,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Model:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 459,\n                columnNumber: 40\n              }, this), \" Enhanced Gaussian Plume\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 459,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 456,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 454,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"sidebar-actions\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => handleCalculateDispersion(selectedSpill.id),\n            disabled: isCalculating,\n            className: \"btn btn-primary\",\n            children: isCalculating ? 'Calculating...' : 'Update Dispersion'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 465,\n            columnNumber: 29\n          }, this), selectedSpill.status !== 'CLEANED_UP' && /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => handleEndIncident(selectedSpill.id),\n            className: \"btn btn-danger\",\n            children: \"End Incident\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 473,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 464,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 418,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 407,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 289,\n    columnNumber: 9\n  }, this);\n}\n_s2(DispersionMap, \"RyMzY4AiWRhAlhWYASy/EYYmtKM=\");\n_c2 = DispersionMap;\nexport default DispersionMap;\nvar _c, _c2;\n$RefreshReg$(_c, \"FullscreenControl\");\n$RefreshReg$(_c2, \"DispersionMap\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useCallback","MapContainer","TileLayer","Marker","Popup","Circle","useMap","apiService","L","jsxDEV","_jsxDEV","Icon","Default","prototype","_getIconUrl","mergeOptions","iconRetinaUrl","require","iconUrl","shadowUrl","FullscreenControl","onToggle","_s","map","control","position","onAdd","button","DomUtil","create","innerHTML","title","onclick","addTo","remove","_c","DispersionMap","spills","selectedSpill","onSpillSelect","onSpillUpdate","onStatusUpdate","calculateDispersion","_s2","dispersionData","setDispersionData","isCalculating","setIsCalculating","error","setError","mapCenter","isFullscreen","setIsFullscreen","weatherData","setWeatherData","tidalData","setTidalData","spillVisualizations","setSpillVisualizations","calculationsInProgress","Set","hasCalculatedRef","lastCalculationRef","mapRef","latitude","longitude","loadEnvironmentalData","current","has","id","handleCalculateDispersion","updateSpillVisualization","lat","lng","weather","tides","Promise","all","getCurrentWeather","catch","err","console","warn","createMockWeather","getTideForecast","createMockTide","Array","isArray","temperature","windSpeed","windDirection","humidity","pressure","visibility","weatherCondition","tideHeight","currentSpeed","currentDirection","time","Date","toISOString","spill","volume","parseFloat","baseRadius","Math","max","sqrt","windEffect","min","tideEffect","tempEffect","chemicalEffect","getChemicalSpreadFactor","chemicalType","calculatedRadius","finalRadius","avgDirection","calculatedOpacity","finalOpacity","isFinite","prev","radius","direction","opacity","color","getSpillColor","priority","chemical","toLowerCase","includes","spillId","log","result","add","delete","handleEndIncident","confirmed","window","confirm","alert","toggleFullscreen","createCustomIcon","divIcon","className","html","iconSize","iconAnchor","getCircleProps","viz","pathOptions","fillColor","fillOpacity","weight","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","name","ref","center","zoom","style","height","width","zoomControl","url","attribution","circleProps","Fragment","icon","eventHandlers","click","toLocaleString","status","spillTime","disabled","round","calculationTime","toFixed","affectedAreaKm2","_c2","$RefreshReg$"],"sources":["C:/water/chemical-dispersion-app/frontend/src/components/Map/DispersionMap.js"],"sourcesContent":["import React, { useState, useEffect, useRef, useCallback } from 'react';\nimport { MapContainer, TileLayer, Marker, Popup, Circle, useMap } from 'react-leaflet';\nimport { apiService } from '../../services/api';\nimport 'leaflet/dist/leaflet.css';\nimport L from 'leaflet';\nimport './DispersionMap.css';\n\n// Fix for default markers in react-leaflet\ndelete L.Icon.Default.prototype._getIconUrl;\nL.Icon.Default.mergeOptions({\n    iconRetinaUrl: require('leaflet/dist/images/marker-icon-2x.png'),\n    iconUrl: require('leaflet/dist/images/marker-icon.png'),\n    shadowUrl: require('leaflet/dist/images/marker-shadow.png'),\n});\n\n// Fullscreen control component\nfunction FullscreenControl({ onToggle }) {\n    const map = useMap();\n    \n    useEffect(() => {\n        const control = L.control({ position: 'topright' });\n        control.onAdd = () => {\n            const button = L.DomUtil.create('button', 'leaflet-bar leaflet-control fullscreen-btn');\n            button.innerHTML = '⛶';\n            button.title = 'Toggle Fullscreen';\n            button.onclick = onToggle;\n            return button;\n        };\n        control.addTo(map);\n        return () => control.remove();\n    }, [map, onToggle]);\n\n    return null;\n}\n\nfunction DispersionMap({ spills = [], selectedSpill, onSpillSelect, onSpillUpdate, onStatusUpdate, calculateDispersion }) {\n    const [dispersionData, setDispersionData] = useState(null);\n    const [isCalculating, setIsCalculating] = useState(false);\n    const [error, setError] = useState(null);\n    const [mapCenter] = useState([29.7604, -95.3698]); // Houston, TX\n    const [isFullscreen, setIsFullscreen] = useState(false);\n    const [weatherData, setWeatherData] = useState(null);\n    const [tidalData, setTidalData] = useState(null);\n    const [spillVisualizations, setSpillVisualizations] = useState({});\n\n    const calculationsInProgress = useRef(new Set());\n    const hasCalculatedRef = useRef(new Set());\n    const lastCalculationRef = useRef(null);\n    const mapRef = useRef(null);\n\n    // Load environmental data for selected spill\n    useEffect(() => {\n        if (selectedSpill?.latitude && selectedSpill?.longitude) {\n            loadEnvironmentalData(selectedSpill.latitude, selectedSpill.longitude);\n            if (!hasCalculatedRef.current.has(selectedSpill.id) && \n                !isCalculating && \n                lastCalculationRef.current !== selectedSpill.id) {\n                handleCalculateDispersion(selectedSpill.id);\n            }\n        }\n    }, [selectedSpill?.id]);\n\n    // Update spill visualizations when environmental data changes\n    useEffect(() => {\n        if (weatherData && tidalData && selectedSpill) {\n            updateSpillVisualization(selectedSpill);\n        }\n    }, [weatherData, tidalData, selectedSpill, dispersionData]);\n\n    const loadEnvironmentalData = async (lat, lng) => {\n        try {\n            const [weather, tides] = await Promise.all([\n                apiService.getCurrentWeather(lat, lng).catch(err => {\n                    console.warn('Weather data unavailable:', err);\n                    return createMockWeather();\n                }),\n                apiService.getTideForecast(lat, lng, 24).catch(err => {\n                    console.warn('Tidal data unavailable:', err);\n                    return [createMockTide()];\n                })\n            ]);\n            \n            setWeatherData(weather);\n            setTidalData(Array.isArray(tides) ? tides[0] : tides);\n        } catch (error) {\n            console.error('Error loading environmental data:', error);\n            setWeatherData(createMockWeather());\n            setTidalData(createMockTide());\n        }\n    };\n\n    const createMockWeather = () => ({\n        temperature: 22.0,\n        windSpeed: 5.5,\n        windDirection: 180.0,\n        humidity: 65.0,\n        pressure: 1013.25,\n        visibility: 10.0,\n        weatherCondition: 'Partly Cloudy'\n    });\n\n    const createMockTide = () => ({\n        tideHeight: 1.2,\n        currentSpeed: 0.3,\n        currentDirection: 90,\n        time: new Date().toISOString()\n    });\n\n    const updateSpillVisualization = (spill) => {\n        if (!spill || !weatherData || !tidalData) return;\n\n        // Safely extract and validate numeric values\n        const volume = parseFloat(spill.volume) || 1000;\n        const windSpeed = parseFloat(weatherData.windSpeed) || 5;\n        const temperature = parseFloat(weatherData.temperature) || 20;\n        const currentSpeed = parseFloat(tidalData.currentSpeed) || 0.3;\n        const windDirection = parseFloat(weatherData.windDirection) || 0;\n        const currentDirection = parseFloat(tidalData.currentDirection) || 0;\n\n        // Calculate base radius from volume with safety checks\n        const baseRadius = Math.max(100, Math.sqrt(volume) * 2); // Minimum 100m radius\n        \n        // Environmental factors with bounds checking\n        const windEffect = Math.min(Math.max(windSpeed / 10, 0.1), 2.0); // 0.1 to 2.0\n        const tideEffect = Math.min(Math.max(currentSpeed * 100, 0.1), 1.5); // 0.1 to 1.5\n        const tempEffect = Math.min(Math.max((temperature - 15) / 20, 0.5), 1.5); // 0.5 to 1.5\n        \n        // Chemical properties effect (simplified)\n        const chemicalEffect = getChemicalSpreadFactor(spill.chemicalType);\n        \n        // Calculate final radius with safety bounds\n        const calculatedRadius = baseRadius * (1 + windEffect + tideEffect + tempEffect) * chemicalEffect;\n        const finalRadius = Math.max(100, Math.min(calculatedRadius, 10000)); // Between 100m and 10km\n        \n        // Calculate spread direction based on wind and current\n        const avgDirection = (windDirection + currentDirection) / 2;\n        \n        // Ensure opacity is valid\n        const calculatedOpacity = Math.min(0.8, 0.3 + volume / 10000);\n        const finalOpacity = Math.max(0.1, Math.min(calculatedOpacity, 0.8));\n        \n        // Validate all values before setting state\n        if (isFinite(finalRadius) && isFinite(avgDirection) && isFinite(finalOpacity)) {\n            setSpillVisualizations(prev => ({\n                ...prev,\n                [spill.id]: {\n                    radius: finalRadius,\n                    direction: avgDirection,\n                    opacity: finalOpacity,\n                    color: getSpillColor(spill.chemicalType, spill.priority)\n                }\n            }));\n        } else {\n            console.warn('Invalid visualization values calculated for spill:', spill.id);\n            // Set safe default values\n            setSpillVisualizations(prev => ({\n                ...prev,\n                [spill.id]: {\n                    radius: 500, // Default 500m radius\n                    direction: 0,\n                    opacity: 0.5,\n                    color: getSpillColor(spill.chemicalType, spill.priority)\n                }\n            }));\n        }\n    };\n\n    const getChemicalSpreadFactor = (chemicalType) => {\n        if (!chemicalType) return 1.0;\n        const chemical = chemicalType.toLowerCase();\n        if (chemical.includes('oil') || chemical.includes('petroleum')) return 1.5;\n        if (chemical.includes('acid') || chemical.includes('toxic')) return 0.8;\n        if (chemical.includes('gas') || chemical.includes('volatile')) return 2.0;\n        return 1.0;\n    };\n\n    const getSpillColor = (chemicalType, priority) => {\n        if (priority === 'CRITICAL') return '#dc2626';\n        if (priority === 'HIGH') return '#ea580c';\n        if (!chemicalType) return '#3b82f6';\n        \n        const chemical = chemicalType.toLowerCase();\n        if (chemical.includes('oil')) return '#92400e';\n        if (chemical.includes('toxic') || chemical.includes('acid')) return '#7c2d12';\n        if (chemical.includes('gas')) return '#4338ca';\n        return '#3b82f6';\n    };\n\n    const handleCalculateDispersion = async (spillId) => {\n        if (calculationsInProgress.current.has(spillId) || \n            hasCalculatedRef.current.has(spillId) || \n            lastCalculationRef.current === spillId) {\n            console.log(`[SKIP] Already calculating or calculated for spill ${spillId}`);\n            return;\n        }\n\n        setIsCalculating(true);\n        setError(null);\n        lastCalculationRef.current = spillId;\n        \n        try {\n            console.log(`[CALCULATING] Starting dispersion for spill ${spillId}`);\n            \n            const result = await calculateDispersion(spillId, 24);\n            setDispersionData(result);\n            hasCalculatedRef.current.add(spillId);\n            \n            console.log(`[SUCCESS] Dispersion calculation completed for ${spillId}`);\n        } catch (error) {\n            console.error('Dispersion calculation failed:', error);\n            setError('Failed to calculate dispersion. Please try again.');\n            hasCalculatedRef.current.delete(spillId);\n        } finally {\n            setIsCalculating(false);\n        }\n    };\n\n    const handleEndIncident = async (spillId) => {\n        if (!spillId) return;\n        \n        const confirmed = window.confirm('Are you sure you want to end this incident? This action cannot be undone.');\n        if (!confirmed) return;\n        \n        try {\n            await onStatusUpdate(spillId, 'CLEANED_UP');\n            console.log(`Incident ${spillId} marked as cleaned up`);\n        } catch (error) {\n            console.error('Error ending incident:', error);\n            alert('Failed to end incident. Please try again.');\n        }\n    };\n\n    const toggleFullscreen = useCallback(() => {\n        setIsFullscreen(prev => !prev);\n    }, []);\n\n    const createCustomIcon = (spill) => {\n        const color = getSpillColor(spill.chemicalType, spill.priority);\n        return L.divIcon({\n            className: 'custom-spill-marker',\n            html: `<div style=\"\n                background-color: ${color}; \n                width: 24px; \n                height: 24px; \n                border-radius: 50%; \n                border: 3px solid white;\n                box-shadow: 0 2px 8px rgba(0,0,0,0.3);\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                color: white;\n                font-weight: bold;\n                font-size: 12px;\n            \">${spill.priority === 'CRITICAL' ? '!' : spill.priority === 'HIGH' ? '⚠' : '●'}</div>`,\n            iconSize: [24, 24],\n            iconAnchor: [12, 12]\n        });\n    };\n\n    // Safety function to validate circle props\n    const getCircleProps = (viz, spill) => {\n        const radius = parseFloat(viz.radius);\n        const opacity = parseFloat(viz.opacity);\n        \n        // Ensure all values are valid numbers\n        if (!isFinite(radius) || radius <= 0) {\n            console.warn(`Invalid radius for spill ${spill.id}:`, radius);\n            return null; // Don't render invalid circles\n        }\n        \n        if (!isFinite(opacity) || opacity < 0 || opacity > 1) {\n            console.warn(`Invalid opacity for spill ${spill.id}:`, opacity);\n            return null;\n        }\n\n        return {\n            radius: Math.max(100, Math.min(radius, 10000)), // Constrain between 100m and 10km\n            pathOptions: {\n                color: viz.color || '#3b82f6',\n                fillColor: viz.color || '#3b82f6',\n                fillOpacity: Math.max(0.1, Math.min(opacity * 0.3, 0.3)),\n                weight: 2,\n                opacity: Math.max(0.1, Math.min(opacity, 0.8))\n            }\n        };\n    };\n\n    return (\n        <div className={`dispersion-map-container ${isFullscreen ? 'fullscreen' : ''}`}>\n            {/* Error Display */}\n            {error && (\n                <div className=\"error-overlay\">\n                    <div className=\"error-content\">\n                        <span className=\"error-icon\">⚠️</span>\n                        <p>{error}</p>\n                        <button onClick={() => setError(null)} className=\"btn btn-sm btn-secondary\">\n                            Dismiss\n                        </button>\n                    </div>\n                </div>\n            )}\n\n            {/* Calculation Status */}\n            {isCalculating && (\n                <div className=\"calculation-overlay\">\n                    <div className=\"calculation-content\">\n                        <div className=\"loading-spinner\"></div>\n                        <p>Calculating dispersion model for {selectedSpill?.name}...</p>\n                    </div>\n                </div>\n            )}\n\n            {/* Map Container */}\n            <div className=\"map-wrapper\">\n                <MapContainer \n                    ref={mapRef}\n                    center={mapCenter} \n                    zoom={11} \n                    style={{ height: '100%', width: '100%' }}\n                    zoomControl={!isFullscreen}\n                >\n                    <TileLayer\n                        url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n                        attribution='&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\n                    />\n                    \n                    <FullscreenControl onToggle={toggleFullscreen} />\n                    \n                    {/* Render spill markers with dynamic visualizations */}\n                    {spills.map((spill) => {\n                        const viz = spillVisualizations[spill.id];\n                        const circleProps = viz ? getCircleProps(viz, spill) : null;\n                        \n                        return (\n                            <React.Fragment key={spill.id}>\n                                <Marker\n                                    position={[spill.latitude, spill.longitude]}\n                                    icon={createCustomIcon(spill)}\n                                    eventHandlers={{\n                                        click: () => onSpillSelect(spill)\n                                    }}\n                                >\n                                    <Popup>\n                                        <div className=\"spill-popup\">\n                                            <h4>{spill.name}</h4>\n                                            <p><strong>Chemical:</strong> {spill.chemicalType}</p>\n                                            <p><strong>Volume:</strong> {(spill.volume || 0).toLocaleString()}L</p>\n                                            <p><strong>Status:</strong> \n                                                <span className={`status ${spill.status.toLowerCase()}`}>\n                                                    {spill.status}\n                                                </span>\n                                            </p>\n                                            <p><strong>Priority:</strong> {spill.priority}</p>\n                                            <p><strong>Time:</strong> {new Date(spill.spillTime).toLocaleString()}</p>\n                                            \n                                            <div className=\"popup-actions\">\n                                                <button \n                                                    onClick={() => handleCalculateDispersion(spill.id)}\n                                                    disabled={isCalculating}\n                                                    className=\"btn btn-sm btn-primary\"\n                                                >\n                                                    Calculate Dispersion\n                                                </button>\n                                                {spill.status !== 'CLEANED_UP' && (\n                                                    <button \n                                                        onClick={() => handleEndIncident(spill.id)}\n                                                        className=\"btn btn-sm btn-danger\"\n                                                    >\n                                                        End Incident\n                                                    </button>\n                                                )}\n                                            </div>\n                                        </div>\n                                    </Popup>\n                                </Marker>\n                                \n                                {/* Dynamic dispersion visualization - only render if valid */}\n                                {circleProps && spill.id === selectedSpill?.id && (\n                                    <Circle\n                                        center={[spill.latitude, spill.longitude]}\n                                        radius={circleProps.radius}\n                                        pathOptions={circleProps.pathOptions}\n                                    >\n                                        <Popup>\n                                            <div className=\"dispersion-popup\">\n                                                <h4>Dispersion Zone</h4>\n                                                <p><strong>Affected Radius:</strong> {Math.round(circleProps.radius)}m</p>\n                                                <p><strong>Calculation Time:</strong> {dispersionData?.calculationTime}</p>\n                                                <p><strong>Environmental Factors:</strong></p>\n                                                <ul>\n                                                    <li>Wind: {weatherData?.windSpeed} @ {weatherData?.windDirection}°</li>\n                                                    <li>Current: {tidalData?.currentSpeed} m/s</li>\n                                                    <li>Temperature: {weatherData?.temperature}°C</li>\n                                                </ul>\n                                            </div>\n                                        </Popup>\n                                    </Circle>\n                                )}\n                            </React.Fragment>\n                        );\n                    })}\n                </MapContainer>\n            </div>\n\n            {/* Spill Details Panel (when selected) */}\n            {selectedSpill && (\n                <div className=\"spill-details-sidebar\">\n                    <div className=\"sidebar-header\">\n                        <h3>{selectedSpill.name}</h3>\n                        <button \n                            className=\"btn btn-sm btn-secondary\"\n                            onClick={() => onSpillSelect(null)}\n                        >\n                            ✕\n                        </button>\n                    </div>\n                    \n                    <div className=\"sidebar-content\">\n                        <div className=\"detail-section\">\n                            <h4>Incident Details</h4>\n                            <div className=\"detail-grid\">\n                                <div className=\"detail-item\">\n                                    <label>Chemical:</label>\n                                    <span>{selectedSpill.chemicalType}</span>\n                                </div>\n                                <div className=\"detail-item\">\n                                    <label>Volume:</label>\n                                    <span>{(selectedSpill.volume || 0).toLocaleString()}L</span>\n                                </div>\n                                <div className=\"detail-item\">\n                                    <label>Status:</label>\n                                    <span className={`status ${selectedSpill.status.toLowerCase()}`}>\n                                        {selectedSpill.status}\n                                    </span>\n                                </div>\n                                <div className=\"detail-item\">\n                                    <label>Priority:</label>\n                                    <span className={`priority ${selectedSpill.priority.toLowerCase()}`}>\n                                        {selectedSpill.priority}\n                                    </span>\n                                </div>\n                                <div className=\"detail-item\">\n                                    <label>Location:</label>\n                                    <span>{selectedSpill.latitude.toFixed(4)}, {selectedSpill.longitude.toFixed(4)}</span>\n                                </div>\n                                <div className=\"detail-item\">\n                                    <label>Reported:</label>\n                                    <span>{new Date(selectedSpill.spillTime).toLocaleString()}</span>\n                                </div>\n                            </div>\n                        </div>\n\n                        {dispersionData && (\n                            <div className=\"detail-section\">\n                                <h4>Dispersion Analysis</h4>\n                                <div className=\"analysis-data\">\n                                    <p><strong>Last Calculated:</strong> {dispersionData.calculationTime}</p>\n                                    <p><strong>Affected Area:</strong> {dispersionData.affectedAreaKm2 || 0} km²</p>\n                                    <p><strong>Model:</strong> Enhanced Gaussian Plume</p>\n                                </div>\n                            </div>\n                        )}\n\n                        <div className=\"sidebar-actions\">\n                            <button \n                                onClick={() => handleCalculateDispersion(selectedSpill.id)}\n                                disabled={isCalculating}\n                                className=\"btn btn-primary\"\n                            >\n                                {isCalculating ? 'Calculating...' : 'Update Dispersion'}\n                            </button>\n                            {selectedSpill.status !== 'CLEANED_UP' && (\n                                <button \n                                    onClick={() => handleEndIncident(selectedSpill.id)}\n                                    className=\"btn btn-danger\"\n                                >\n                                    End Incident\n                                </button>\n                            )}\n                        </div>\n                    </div>\n                </div>\n            )}\n        </div>\n    );\n}\n\nexport default DispersionMap;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}